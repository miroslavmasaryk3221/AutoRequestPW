(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"7pMU":function(e,t,i){"use strict";i.d(t,"a",function(){return M});var s=i("mrSG"),o=i("3Pt+"),c=i("0IaG"),n=i("VfN6"),a=i("cp0P"),r=i("SxV6"),l=i("vHvj"),d=i("CiM1"),u=i("fXoL"),h=i("NJqk"),b=i("ceUb"),m=i("ofXK"),g=i("Qu3c"),p=i("Uz6v"),f=i("d91t"),k=i("taKe"),v=i("+bz6");function C(e,t){if(1&e&&(u.Ub(0,"div",8),u.Oc(1," To assign a DoubleLock to a Secret you need to either have access to a DoubleLock group or have permission to create a new DoubleLock group.\n"),u.Tb()),2&e){const e=u.fc();u.nc("ss-page-name",e.pageName)}}function O(e,t){if(1&e&&(u.Ub(0,"thy-form-layout-row",13),u.gc(1,"async"),u.gc(2,"ssLocale"),u.Sb(3,14),u.Ub(4,"span",16),u.Oc(5,"In order to apply DoubleLock, the Secret cannot have a policy assigned"),u.Tb(),u.Rb(),u.Tb()),2&e){const e=u.fc(2);u.nc("labelText",u.hc(1,2,u.ic(2,4,"secret-policy",e.pageName))),u.Cb(4),u.nc("ss-page-name",e.pageName)}}function S(e,t){if(1&e&&(u.Ub(0,"thy-form-layout-row",13),u.gc(1,"async"),u.gc(2,"ssLocale"),u.Sb(3,14),u.Pb(4,"ss-form-input",17),u.Rb(),u.Tb()),2&e){const e=u.fc(2);u.nc("labelText",u.hc(1,2,u.ic(2,4,"remove-policy",e.pageName))),u.Cb(4),u.nc("type",e.formInputType.Boolean)}}function y(e,t){if(1&e&&(u.Ub(0,"thy-form-layout-row",13),u.gc(1,"async"),u.gc(2,"ssLocale"),u.Ub(3,"div",18),u.Ub(4,"span",19),u.Oc(5,"Enter a name for the new DoubleLock Group that will be assigned to this Secret"),u.Tb(),u.Tb(),u.Sb(6,14),u.Pb(7,"ss-form-input",20),u.Rb(),u.Tb()),2&e){const e=u.fc(2);u.nc("labelText",u.hc(1,4,u.ic(2,6,"secret-doublelock-name",e.pageName))),u.Cb(7),u.nc("type",e.formInputType.String)("maxlength",128)("placeholder",e.enterDoubleLockName)}}function _(e,t){if(1&e&&(u.Ub(0,"div",9),u.Pb(1,"ss-validation-summary",10),u.Ub(2,"thy-form-layout",11),u.Mc(3,O,6,7,"thy-form-layout-row",12),u.Mc(4,S,5,7,"thy-form-layout-row",12),u.Ub(5,"thy-form-layout-row",13),u.gc(6,"async"),u.gc(7,"ssLocale"),u.Sb(8,14),u.Pb(9,"ss-form-input",15),u.Rb(),u.Tb(),u.Mc(10,y,8,9,"thy-form-layout-row",12),u.Tb(),u.Tb()),2&e){const e=u.fc();u.nc("formGroup",e.form),u.Cb(1),u.nc("ssForm",e.form),u.Cb(1),u.nc("noBottomMargin",!0),u.Cb(1),u.nc("ngIf",e.hasSecretPolicy),u.Cb(1),u.nc("ngIf",e.hasSecretPolicy),u.Cb(1),u.nc("labelText",u.hc(6,9,u.ic(7,11,"secret-doublelock-group",e.pageName))),u.Cb(4),u.nc("type",e.formInputType.DropDown)("options",e.doubleLockOptions),u.Cb(1),u.nc("ngIf",e.newCode===e.form.value.doubleLockGroup)}}let M=(()=>{let e=class{constructor(e,t,i,s,c,n,a,r,d){this.context=e,this.dialog=t,this._doubleLockService=i,this._log=s,this._localizationService=c,this._secretService=n,this.ies=a,this._userService=r,this._errorService=d,this.removeCode="remove",this.newCode="new",this.pageName="assigndoublelock",this.enterDoubleLockName="Enter DoubleLock Name",this.formInputType=l.a,this.hasDoubleLockOptions=!1,this.form=new o.k({removePolicy:new o.h(""),doubleLockGroup:new o.h("",o.C.required),name:new o.h("")}),this.requireEmptyOrRemoveObserver={next:e=>{e?this.context.doubleLockId||(this.form.controls.doubleLockGroup.enable(),this.form.controls.removePolicy.clearValidators()):(this.form.controls.doubleLockGroup.disable(),this.form.controls.removePolicy.setErrors({cannotHavePolicy:{valid:!1,message:this._localizationService.getCachedPageMessage("common","validator-cannotHavePolicy")}}))},error:e=>{},complete:()=>{}},this.secretId=e.secretId}ngOnInit(){this._localizationService.loadResourcePage(this.pageName),this._localizationService.loadResourcePage("doublelock"),this._localizationService.getPageMessage(this.pageName,"enter-doublelock-name").pipe(Object(r.a)()).subscribe(e=>{this.enterDoubleLockName=e}),this.context.doubleLockId?(this.doubleLockId=this.context.doubleLockId,this._doubleLockService.getDoubleLocksList(!1,!0).subscribe({next:e=>{const t=e.find(e=>e.doubleLockId===this.context.doubleLockId);t&&(this.hasDoubleLockOptions=!0,this.doubleLockOptions=[{value:t.doubleLockId.toString(),text:t.doubleLockName}],this.form.controls.doubleLockGroup.setValue(this.context.doubleLockId),this.form.controls.doubleLockGroup.disable(),this._setupValidation(null))}})):(this.form.controls.doubleLockGroup.valueChanges.pipe(Object(n.b)(this)).subscribe(e=>{this._setupValidation(e)}),Object(a.a)([this._secretService.getSecretDetailGeneral(this.secretId,!1,!1).pipe(Object(r.a)()),this._secretService.getSecretDetailSecurity(this.secretId).pipe(Object(r.a)())]).subscribe(e=>{this._assignGeneral(e[0]),this._assignSecurity(e[1])})),this._secretService.getSecretDetailGeneral(this.secretId,!1,!1).pipe(Object(r.a)()).subscribe({next:e=>{this.secret=e,this.hasSecretPolicy=e.secretPolicy.value>0,this.form.controls.removePolicy.setValue(!this.hasSecretPolicy)}}),this.form.controls.removePolicy.valueChanges.pipe(Object(n.b)(this)).subscribe(this.requireEmptyOrRemoveObserver),this.ies.enableEditMode("doublelock",this.form)}_setupValidation(e){e===this.newCode?this.form.controls.name.setValidators(d.a.requiredNotEmpty):this.form.controls.name.clearValidators(),this.form.controls.name.updateValueAndValidity()}_assignGeneral(e){this.secret=e,this.hasSecretPolicy=e.secretPolicy.value>0,this.form.controls.removePolicy.setValue(!this.hasSecretPolicy)}_assignSecurity(e){this.doubleLockId=e.doubleLockId.value,this._doubleLockService.getDoubleLocksList(!1,!0).pipe(Object(r.a)()).subscribe({next:t=>{this.doubleLockOptions=t.map(e=>({value:e.doubleLockId.toString(),text:e.doubleLockName})),this._userService.hasRolePermission("Administer DoubleLock Keys")&&(this.doubleLockOptions.unshift({value:this.newCode,text:this._localizationService.getCachedPageMessage("doublelock","create-new-doublelock"),class:"italic"}),e.doubleLockId&&e.doubleLockId.value>0&&this.doubleLockOptions.unshift({value:this.removeCode,text:this._localizationService.getCachedPageMessage("doublelock","remove-doublelock"),class:"italic"})),e.isDoubleLock&&e.isDoubleLock.value?(this.form.controls.doubleLockGroup.setValue(this.doubleLockId),this._setupValidation(null)):this._setupValidation(this.newCode),this.hasDoubleLockOptions=this.doubleLockOptions.length>0},error:e=>{this._log.Verbose(e.Message)}})}cancel(){this.ies.disableEditMode("doublelock",!0),this.ies.showValidationMessages=!1,this.form.setErrors(null),this.form.markAsPristine(),this.form.markAsUntouched(),this.dialog.close({isApproved:!1})}save(e){this.ies.isSaving=!0,this.form.value.doubleLockGroup===this.removeCode?this._doubleLockService.removeDoubleLock(this.secretId).pipe(Object(r.a)()).subscribe({next:e=>{this.dialog.close({isApproved:!0}),this.ies.disableEditMode("doublelock",!0)},error:e=>this._checkError(e)}):this.form.value.doubleLockGroup===this.newCode?this._doubleLockService.createDoubleLock(this.form.value.name).pipe(Object(r.a)()).subscribe({next:e=>{this.doubleLockId=e.doubleLockId,this._doubleLockService.setSecretDoubleLock(this.secretId,this.doubleLockId).pipe(Object(r.a)()).subscribe({next:e=>{this.dialog.close({isApproved:!0}),this.ies.disableEditMode("doublelock",!0)},error:e=>this._checkError(e)})},error:e=>{this.ies.assignErrorToFormGroup(this.form,e)}}):this._doubleLockService.setSecretDoubleLock(this.secretId,this.form.controls.doubleLockGroup.value).pipe(Object(r.a)()).subscribe({next:e=>{this.dialog.close({isApproved:!0}),this.ies.disableEditMode("doublelock",!0)},error:e=>this._checkError(e)})}_checkError(e){this.ies.isSaving=!1;const t=this._errorService.getErrorMessage(e);if("API_SecretRequiresCheckout"!==t.errorCode&&"API_SecretAccessApprovalDenied"!==t.errorCode&&"API_ValidateSecretAccessCommentRequired"!==t.errorCode)throw e;this.dialog.close({isApproved:!1})}};return e.\u0275fac=function(t){return new(t||e)(u.Ob(c.a),u.Ob(c.i),u.Ob(h.r),u.Ob(h.fb),u.Ob(h.F),u.Ob(h.V),u.Ob(h.B),u.Ob(h.kb),u.Ob(h.eb))},e.\u0275cmp=u.Ib({type:e,selectors:[["ss-modal-assign-doublelock"]],decls:11,vars:6,consts:[["mat-dialog-title","","ss-locale","assign-doublelock",3,"ss-page-name"],["mat-dialog-content",""],["ss-locale","no-doublelock-options",3,"ss-page-name",4,"ngIf"],[3,"formGroup",4,"ngIf"],["mat-dialog-actions",""],["type","button","ss-locale","cancel","ss-page-name","common",1,"thy","basic","button",3,"click"],[2,"display","inline-block",3,"matTooltip"],["type","button","ss-locale","assign-doublelock-secret",1,"thy","primary","button",3,"ss-page-name","disabled","click"],["ss-locale","no-doublelock-options",3,"ss-page-name"],[3,"formGroup"],["editSection","doublelock",3,"ssForm"],[3,"noBottomMargin"],[3,"labelText",4,"ngIf"],[3,"labelText"],["value-column",""],["formControlName","doubleLockGroup","editSection","doublelock",2,"width","100%",3,"type","options"],["ss-locale","must-remove-policy",1,"label-description",3,"ss-page-name"],["formControlName","removePolicy","editSection","doublelock",3,"type"],["label-column",""],["ss-locale","enter-doublelock-name-to-assign","ss-page-name","doublelock",1,"label-description"],["formControlName","name","editSection","doublelock",2,"width","100%",3,"type","maxlength","placeholder"]],template:function(e,t){1&e&&(u.Ub(0,"h1",0),u.Oc(1," Assign DoubleLock\n"),u.Tb(),u.Ub(2,"div",1),u.Mc(3,C,2,1,"div",2),u.Mc(4,_,11,14,"div",3),u.Tb(),u.Ub(5,"div",4),u.Ub(6,"button",5),u.bc("click",function(){return t.cancel()}),u.Oc(7,"Cancel"),u.Tb(),u.Ub(8,"div",6),u.Ub(9,"button",7),u.bc("click",function(e){return t.save(e)}),u.Oc(10,"Assign DoubleLock"),u.Tb(),u.Tb(),u.Tb()),2&e&&(u.nc("ss-page-name",t.pageName),u.Cb(3),u.nc("ngIf",!t.hasDoubleLockOptions),u.Cb(1),u.nc("ngIf",t.hasDoubleLockOptions),u.Cb(4),u.nc("matTooltip",t.ies.okButtonTooltip),u.Cb(1),u.nc("ss-page-name",t.pageName)("disabled",t.ies.isSaveDisabled("doublelock")))},directives:[c.j,b.a,c.g,m.o,c.d,g.a,o.t,o.l,p.a,f.e,f.f,k.a,o.s,o.j,o.o],pipes:[m.b,v.a],styles:[".ui.form[_ngcontent-%COMP%]   .inline.fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin:0 auto auto}.label-description[_ngcontent-%COMP%]{display:block;padding:4px 0}"]}),e=Object(s.b)([Object(n.a)()],e),e})()},"9dUh":function(e,t,i){"use strict";i.d(t,"a",function(){return E});var s=i("fXoL"),o=i("vSIx"),c=i("bnEz"),n=i("SxV6"),a=i("my0S"),r=i("tyNb"),l=i("NJqk"),d=i("3jxp"),u=i("kWOt"),h=i("0IaG"),b=i("Ljv0"),m=i("ofXK"),g=i("ceUb"),p=i("OFbc");function f(e,t){1&e&&(s.Ub(0,"h1",6),s.Oc(1,"Checkout Secret"),s.Tb())}function k(e,t){1&e&&(s.Ub(0,"div"),s.Ub(1,"div"),s.Pb(2,"svg-icon",7),s.Tb(),s.Ub(3,"h2",8),s.Oc(4,"Secret Checkout & Comment Required"),s.Tb(),s.Ub(5,"span",9),s.Oc(6,"Please click Enter Comment to view the Secret."),s.Tb(),s.Tb())}function v(e,t){1&e&&(s.Ub(0,"div"),s.Ub(1,"div"),s.Pb(2,"svg-icon",7),s.Tb(),s.Ub(3,"h2",10),s.Oc(4,"Secret Checkout Required"),s.Tb(),s.Ub(5,"span",11),s.Oc(6,"Please click Checkout to view the Secret."),s.Tb(),s.Tb())}function C(e,t){1&e&&(s.Ub(0,"div"),s.Ub(1,"div"),s.Pb(2,"svg-icon",12),s.Tb(),s.Ub(3,"h2",13),s.Oc(4,"Secret View Comment Required"),s.Tb(),s.Pb(5,"br"),s.Ub(6,"span",14),s.Oc(7,"A comment must be entered to view this Secret"),s.Tb(),s.Tb())}function O(e,t){1&e&&(s.Ub(0,"div"),s.Pb(1,"svg-icon",21),s.Tb())}function S(e,t){1&e&&(s.Ub(0,"div"),s.Pb(1,"svg-icon",22),s.Tb())}function y(e,t){1&e&&(s.Ub(0,"div",23),s.Oc(1,"It has a pending password change on check-in."),s.Tb())}function _(e,t){1&e&&s.Pb(0,"span",24)}const M=function(e){return[e]};function T(e,t){if(1&e&&s.Pb(0,"span",25),2&e){const e=s.fc(2);s.nc("ss-locale-replace",s.sc(1,M,e.checkoutMinuteRemaining))}}function I(e,t){if(1&e&&s.Pb(0,"span",26),2&e){const e=s.fc(2);s.nc("ss-locale-replace",s.sc(1,M,e.checkoutMinuteRemaining))}}function L(e,t){if(1&e&&(s.Ub(0,"div"),s.Mc(1,O,2,0,"div",4),s.Mc(2,S,2,0,"div",4),s.Ub(3,"h2",15),s.Oc(4),s.Tb(),s.Ub(5,"div",16),s.Mc(6,y,2,0,"div",17),s.Mc(7,_,1,0,"span",18),s.Mc(8,T,1,3,"span",19),s.Mc(9,I,1,3,"span",20),s.Tb(),s.Tb()),2&e){const e=s.fc();s.Cb(1),s.nc("ngIf",e.canForceCheckin()),s.Cb(1),s.nc("ngIf",!e.canForceCheckin()),s.Cb(1),s.nc("ss-locale-replace",s.sc(8,M,e.otherUserCheckedOutDisplayName)),s.Cb(1),s.Qc("Secret is currently checked out by ",e.otherUserCheckedOutDisplayName,"."),s.Cb(2),s.nc("ngIf",e.isCheckoutPendingRPC),s.Cb(1),s.nc("ngIf",!e.issueWithCheckin&&0===e.minutesRemaining),s.Cb(1),s.nc("ngIf",!e.issueWithCheckin&&e.minutesRemaining>0),s.Cb(1),s.nc("ngIf",e.issueWithCheckin)}}function P(e,t){if(1&e){const e=s.Vb();s.Ub(0,"button",30),s.bc("click",function(){return s.Ec(e),s.fc(2).cancel()}),s.Oc(1,"Cancel"),s.Tb()}}function U(e,t){if(1&e){const e=s.Vb();s.Sb(0),s.Mc(1,P,2,0,"button",27),s.Ub(2,"div",28),s.Ub(3,"button",29),s.bc("click",function(){return s.Ec(e),s.fc().checkOutSecret()}),s.Oc(4,"Checkout"),s.Tb(),s.Tb(),s.Rb()}if(2&e){const e=s.fc();s.Cb(1),s.nc("ngIf",e.isModal),s.Cb(2),s.nc("disabled",e.isLoading)}}function w(e,t){if(1&e){const e=s.Vb();s.Ub(0,"button",33),s.bc("click",function(){return s.Ec(e),s.fc(2).cancel()}),s.Oc(1,"Cancel"),s.Tb()}}function B(e,t){if(1&e){const e=s.Vb();s.Sb(0),s.Mc(1,w,2,0,"button",31),s.Ub(2,"div",28),s.Ub(3,"button",32),s.bc("click",function(){return s.Ec(e),s.fc().enterViewComment()}),s.Oc(4,"Enter Comment"),s.Tb(),s.Tb(),s.Rb()}if(2&e){const e=s.fc();s.Cb(1),s.nc("ngIf",e.isModal)}}function D(e,t){if(1&e){const e=s.Vb();s.Ub(0,"button",36),s.bc("click",function(){return s.Ec(e),s.fc(2).cancel()}),s.Oc(1,"Cancel"),s.Tb()}}function N(e,t){if(1&e){const e=s.Vb();s.Ub(0,"button",37),s.bc("click",function(){return s.Ec(e),s.fc(2).checkinSecret(!0)}),s.Oc(1,"Force Check In"),s.Tb()}}function x(e,t){if(1&e&&(s.Sb(0),s.Mc(1,D,2,0,"button",34),s.Ub(2,"div",28),s.Mc(3,N,2,0,"button",35),s.Tb(),s.Rb()),2&e){const e=s.fc();s.Cb(1),s.nc("ngIf",e.isModal),s.Cb(2),s.nc("ngIf",e.canForceCheckin())}}let E=(()=>{class e{constructor(e,t,i,o,c,n,a,r,l){this._activatedRoute=e,this._secretService=t,this._log=i,this._dateService=o,this._errorService=c,this._router=n,this._stateService=a,this._dialogService=r,this._notificationService=l,this.isModal=!1,this.requiresCheckOutAndComment=!1,this.isViewCommentRequired=!1,this.isCheckedOutByOtherUser=!1,this.isCheckoutPendingRPC=!1,this.checkoutMinuteRemaining="",this.minutesRemaining=0,this.issueWithCheckin=!1,this.isLoading=!0,this.success=new s.n,this.error=new s.n,this.stateLoaded=new s.n}ngOnChanges(e){e.secretId&&this.updateSecretDetailState()}updateSecretDetailState(e=null){this.isViewCommentRequired=!1,this.isCheckedOutByOtherUser=!1,this.requiresCheckOutAndComment=!1,this.otherUserCheckedOutDisplayName=null,this.checkoutMinuteRemaining="",e?this._secretDetailStateLoaded(e):this.loadSecretDetailState(this.secretId)}loadSecretDetailState(e){this._secretService.getSecretDetailState(e).pipe(Object(n.a)()).subscribe(e=>{this._secretDetailStateLoaded(e)})}_secretDetailStateLoaded(e){this._log.Verbose("Secret State",e),this.secretDetailState=e,this.stateLoaded.emit(e),this.isLoading=!1,1===e.secretState?this._router.navigate(["/secret/access-request",this.secretId]):3===e.secretState?this.isViewCommentRequired=!0:2!==e.secretState&&9!==e.secretState&&10!==e.secretState||(e.isCheckedOut&&!e.isCheckedOutByCurrentUser?(this.isCheckedOutByOtherUser=!0,this.otherUserCheckedOutDisplayName=e.checkedOutUserDisplayName,this.setCheckedOutByOtherUserString(e.checkOutMinutesRemaining),this.isCheckoutPendingRPC=9===e.secretState):this.requiresCheckOutAndComment=10===e.secretState)}canForceCheckin(){return this.secretDetailState&&this._secretService.hasAction(c.W.ForceCheckin,this.secretDetailState)}checkinSecret(e){this.isLoading=!0,this._notificationService.removeBannerNotification("page","checkout-failed"),this._stateService.events.errorBannerMessagesUpdated.next({key:"checkout-failed",message:"",showConsoleLink:!1,showBanner:!1}),this._secretService.checkInSecret(this.secretDetailState.id,e).pipe(Object(n.a)()).subscribe({next:e=>{this.isLoading=!1,this.updateSecretDetailState()},error:e=>{this.isLoading=!1;const t=this._errorService.getErrorMessage(e);if("API_SecretCheckedOut"===t.errorCode)this.updateSecretDetailState();else if("API_UserMustRequestAccess"===t.errorCode||"API_RequestNotApprovedOrExpired"===t.errorCode)this._router.navigate(["/secret/access-request",this.secretId]);else{if(!t.errorCode)throw e;this._notificationService.addBannerNotification("page",{key:"checkout-failed",message:t.message,status:"failure"}),this._stateService.events.errorBannerMessagesUpdated.next({key:"checkout-failed",message:t.message,showConsoleLink:!1,showBanner:!0})}}})}setCheckedOutByOtherUserString(e){this.minutesRemaining=e;const t=Math.abs(e),i=this._dateService.getDurationFromMinutes(t);this.checkoutMinuteRemaining=this._dateService.getFormattedDuration(i,null,!1),e<0&&(this.issueWithCheckin=!0)}enterViewComment(){this._openAccessRequest(a.a.Comment)}_openAccessRequest(e){this._dialogService.open(o.a,{data:{secretId:this.secretId,approvalType:e,secretName:null,redirectOnApprove:!0,checkOutAfterComment:this.requiresCheckOutAndComment}}).afterClosed().pipe(Object(n.a)()).subscribe(e=>{(null==e?void 0:e.isApproved)?this._router.url.indexOf("/checkout")>=0&&this.updateSecretDetailState():(null==e?void 0:e.deniedContext.reload)&&this.updateSecretDetailState()})}checkOutSecret(){this.isLoading=!0,this._notificationService.removeBannerNotification("page","checkout-failed"),this._stateService.events.errorBannerMessagesUpdated.next({key:"checkout-failed",message:"",showConsoleLink:!1,showBanner:!1}),this._secretService.checkOutSecret(this.secretId).pipe(Object(n.a)()).subscribe({next:e=>{this.isLoading=!1,this.success.emit(e),this.checkoutComplete()},error:e=>{this.isLoading=!1;const t=this._errorService.getErrorMessage(e);if("API_SecretCheckedOut"===t.errorCode)this.updateSecretDetailState();else if("API_UserMustRequestAccess"===t.errorCode||"API_RequestNotApprovedOrExpired"===t.errorCode)this._router.navigate(["/secret/access-request",this.secretId]);else{if(!t.errorCode)throw e;this._log.Error(t.message,null,e),this._notificationService.addBannerNotification("page",{key:"checkout-failed",message:t.message,status:"failure"}),this._stateService.events.errorBannerMessagesUpdated.next({key:"checkout-failed",message:t.message,showConsoleLink:!1,showBanner:!0})}}})}checkoutComplete(){}cancel(){}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(r.a),s.Ob(l.V),s.Ob(l.fb),s.Ob(l.db),s.Ob(d.a),s.Ob(r.e),s.Ob(u.a),s.Ob(h.c),s.Ob(b.i))},e.\u0275cmp=s.Ib({type:e,selectors:[["ss-checkout"]],inputs:{secretId:"secretId"},outputs:{success:"success",error:"error",stateLoaded:"stateLoaded"},features:[s.Ab],decls:12,vars:14,consts:[["mat-dialog-title","","ss-locale","secret-checkout-required","ss-page-name","secretactions",4,"ngIf"],["mat-dialog-content","",1,"access-page","thy-pos-rel"],[3,"active","isFullscreen"],[1,"checkout-content"],[4,"ngIf"],["mat-dialog-actions",""],["mat-dialog-title","","ss-locale","secret-checkout-required","ss-page-name","secretactions"],["name","check_out_required",1,"icon-88","icon-light"],["id","status-title","ss-locale","secret-checkout-comment-required","ss-page-name","secretactions"],["id","status-text","ss-locale","comment-checkout-required","ss-page-name","secretactions"],["id","status-title","ss-locale","secret-checkout-required","ss-page-name","secretactions"],["id","status-text","ss-locale","click-checkout","ss-page-name","secretactions"],["name","comment_dots_solid",1,"icon-88","icon-light"],["id","status-title","ss-locale","comment-required"],["id","status-text","ss-locale","comment-required-description"],["id","status-title","ss-locale","checked-out-by",3,"ss-locale-replace"],["id","status-text"],["ss-locale","checkout-pending-rpc",4,"ngIf"],["ss-locale","checked-out-no-minutes",4,"ngIf"],["ss-locale","checked-out-remaining",3,"ss-locale-replace",4,"ngIf"],["ss-locale","checked-out-remaining-issue",3,"ss-locale-replace",4,"ngIf"],["name","force_check_in",1,"icon-88","icon-light"],["name","not_interested",1,"icon-88","icon-light"],["ss-locale","checkout-pending-rpc"],["ss-locale","checked-out-no-minutes"],["ss-locale","checked-out-remaining",3,"ss-locale-replace"],["ss-locale","checked-out-remaining-issue",3,"ss-locale-replace"],["id","cancel-checkout","class","thy basic button createButton","ss-locale","cancel","ss-page-name","common",3,"click",4,"ngIf"],[2,"display","inline-block"],["id","checkout-button","ss-locale","checkout","ss-page-name","secretactions",1,"thy","primary","button","createButton",3,"disabled","click"],["id","cancel-checkout","ss-locale","cancel","ss-page-name","common",1,"thy","basic","button","createButton",3,"click"],["class","thy basic button createButton","id","cancel-comment-button","ss-locale","cancel","ss-page-name","common",3,"click",4,"ngIf"],["id","enter-comment-button","ss-locale","enter-comment","ss-page-name","secretactions",1,"thy","primary","button","createButton",3,"click"],["id","cancel-comment-button","ss-locale","cancel","ss-page-name","common",1,"thy","basic","button","createButton",3,"click"],["id","force-check-in-cancel","class","thy basic button createButton","ss-locale","cancel","ss-page-name","common",3,"click",4,"ngIf"],["id","force-check-in","class","thy primary button createButton","ss-locale","force-check-in","ss-page-name","secretactions",3,"click",4,"ngIf"],["id","force-check-in-cancel","ss-locale","cancel","ss-page-name","common",1,"thy","basic","button","createButton",3,"click"],["id","force-check-in","ss-locale","force-check-in","ss-page-name","secretactions",1,"thy","primary","button","createButton",3,"click"]],template:function(e,t){1&e&&(s.Mc(0,f,2,0,"h1",0),s.Ub(1,"div",1),s.Pb(2,"thy-loading-dimmer",2),s.Ub(3,"div",3),s.Mc(4,k,7,0,"div",4),s.Mc(5,v,7,0,"div",4),s.Mc(6,C,8,0,"div",4),s.Mc(7,L,10,10,"div",4),s.Tb(),s.Tb(),s.Ub(8,"div",5),s.Mc(9,U,5,2,"ng-container",4),s.Mc(10,B,5,1,"ng-container",4),s.Mc(11,x,4,2,"ng-container",4),s.Tb()),2&e&&(s.nc("ngIf",t.isModal),s.Cb(1),s.Gb("inline-checkout",!t.isModal),s.Cb(1),s.nc("active",t.isLoading)("isFullscreen",!0),s.Cb(2),s.nc("ngIf",t.requiresCheckOutAndComment),s.Cb(1),s.nc("ngIf",!t.isViewCommentRequired&&!t.isCheckedOutByOtherUser&&!t.requiresCheckOutAndComment),s.Cb(1),s.nc("ngIf",t.isViewCommentRequired&&!t.isCheckedOutByOtherUser&&!t.requiresCheckOutAndComment),s.Cb(1),s.nc("ngIf",t.isCheckedOutByOtherUser),s.Cb(1),s.Gb("inline-actions",!t.isModal),s.Cb(1),s.nc("ngIf",!t.isViewCommentRequired&&!t.isCheckedOutByOtherUser&&!t.requiresCheckOutAndComment),s.Cb(1),s.nc("ngIf",t.isViewCommentRequired&&!t.isCheckedOutByOtherUser||t.requiresCheckOutAndComment),s.Cb(1),s.nc("ngIf",t.isCheckedOutByOtherUser))},directives:[m.o,h.g,b.h,h.d,h.j,g.a,p.b],styles:[".access-page[_ngcontent-%COMP%]{padding-top:72px;text-align:center;color:var(--font-color-3)}.access-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3em;color:var(--font-color-1);margin-bottom:16px;font-weight:400}.inline-checkout[_ngcontent-%COMP%]{margin-bottom:60px}.checkout-content[_ngcontent-%COMP%]{min-height:200px}.inline-actions[_ngcontent-%COMP%]{text-align:center}.inline-actions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:auto}"]}),e})()},BYOP:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var s=i("fXoL"),o=i("Ssny"),c=i("ofXK"),n=i("ceUb"),a=i("Qu3c");function r(e,t){if(1&e){const e=s.Vb();s.Ub(0,"button",6),s.bc("click",function(){return s.Ec(e),s.fc(2).saveForm()}),s.Oc(1),s.Tb()}if(2&e){const e=s.fc(2);s.nc("id",e.saveButtonId)("disabled",!e.forceSaveEnabled&&e.ies.isSaveDisabled(e.editSection)),s.Cb(1),s.Pc(e.saveButtonText)}}function l(e,t){if(1&e){const e=s.Vb();s.Ub(0,"button",7),s.bc("click",function(){return s.Ec(e),s.fc(2).saveForm()}),s.Oc(1,"Save"),s.Tb()}if(2&e){const e=s.fc(2);s.nc("id",e.saveButtonId)("disabled",!e.forceSaveEnabled&&e.ies.isSaveDisabled(e.editSection))}}function d(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div",1),s.Ub(1,"button",2),s.bc("click",function(){return s.Ec(e),s.fc().cancelForm()}),s.Oc(2,"Cancel"),s.Tb(),s.Ub(3,"div",3),s.Mc(4,r,2,3,"button",4),s.Mc(5,l,2,2,"button",5),s.Tb(),s.Tb()}if(2&e){const e=s.fc();s.Cb(1),s.nc("id",e.cancelButtonId),s.Cb(2),s.nc("matTooltip",e.forceSaveEnabled?null:e.ies.okButtonTooltip),s.Cb(1),s.nc("ngIf",e.saveButtonText),s.Cb(1),s.nc("ngIf",!e.saveButtonText)}}let u=(()=>{class e{constructor(e){this.ies=e,this.editSection=null,this.saveButtonText=null,this.forceSaveEnabled=!1,this.save=new s.n,this.cancel=new s.n,this.cancelButtonId="layout-button-cancel",this.saveButtonId="layout-button-save"}ngOnInit(){}ngOnChanges(e){e.editSection&&(this.cancelButtonId=`layout-button-cancel-${this.editSection}`,this.saveButtonId=`layout-button-save-${this.editSection}`)}cancelForm(){this.cancel.emit({})}saveForm(){this.save.emit({})}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(o.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["ss-layout-button-row"]],inputs:{editSection:"editSection",saveButtonText:"saveButtonText",forceSaveEnabled:"forceSaveEnabled"},outputs:{save:"save",cancel:"cancel"},features:[s.Ab],decls:1,vars:1,consts:[["class","layout-form-buttons",4,"ngIf"],[1,"layout-form-buttons"],["type","button","ss-locale","cancel","ss-page-name","common",1,"thy","basic","button","nohoverlink",3,"id","click"],[1,"layout-save-button",3,"matTooltip"],["class","thy primary button no-right-margin","type","button",3,"id","disabled","click",4,"ngIf"],["class","thy primary button no-right-margin","type","button","ss-locale","save","ss-page-name","common",3,"id","disabled","click",4,"ngIf"],["type","button",1,"thy","primary","button","no-right-margin",3,"id","disabled","click"],["type","button","ss-locale","save","ss-page-name","common",1,"thy","primary","button","no-right-margin",3,"id","disabled","click"]],template:function(e,t){1&e&&s.Mc(0,d,6,4,"div",0),2&e&&s.nc("ngIf",t.ies.isEditMode(t.editSection))},directives:[c.o,n.a,a.a],styles:[".layout-save-button[_ngcontent-%COMP%]{display:inline;margin-right:0;padding-right:0}"]}),e})()},D3Q8:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var s,o=i("mrSG"),c=i("3Pt+"),n=i("VfN6"),a=i("fXoL"),r=i("Qu3c"),l=i("OFbc"),d=i("ofXK"),u=i("ceUb");function h(e,t){if(1&e&&(a.Ub(0,"span"),a.Oc(1,"\xa0"),a.Ub(2,"span",5),a.Oc(3,"\xa0"),a.Tb(),a.Tb()),2&e){const e=a.fc();a.Cb(2),a.nc("ss-locale",e.localeTitle)}}const b=()=>{};let m=(()=>{let e=s=class{constructor(e){this._controlContainer=e,this.forceDisable=!1,this.title=null,this.elementId=null,this.innerValue="",this.onTouchedCallback=b,this.onChangeCallback=b,this.controlContainer=e}ngOnInit(){this._getFormControl()}ngOnChanges(e){(e.formControlName||e.name)&&(this.elementId=`radio-${this.formControlName}-${this.name}`)}get disabled(){return!!this.forceDisable||!!this.control&&this.control.disabled}_getFormControl(){this.control||this.controlContainer&&this.formControlName&&(this.control=this.controlContainer.control.get(this.formControlName),this.control&&this.control.valueChanges.pipe(Object(n.b)(this)).subscribe(e=>{this.innerValue=e}))}isChecked(){return this.inputValue===this.control.value}get value(){return this.innerValue}set value(e){e!==this.innerValue&&(this.innerValue=e,this.onChangeCallback(e))}onBlur(){this.onTouchedCallback()}writeValue(e){e!==this.innerValue&&(this.innerValue=e)}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}};return e.\u0275fac=function(t){return new(t||e)(a.Ob(c.c,13))},e.\u0275cmp=a.Ib({type:e,selectors:[["ss-radio"]],inputs:{formControlName:"formControlName",name:"name",inputValue:"inputValue",localeTitle:"localeTitle",forceDisable:"forceDisable"},features:[a.Bb([{provide:c.q,useExisting:s,multi:!0}]),a.Ab],decls:5,vars:11,consts:[[1,"ss-radio",3,"id","matTooltip","matTooltipDisabled"],["type","radio",1,"form-control","norowclick",3,"name","checked","ngModel","value","disabled","ngModelChange","blur"],["name","radio_button_checked",1,"svg-icon","icon-24","checked","norowclick"],["name","radio_button_unchecked",1,"svg-icon","icon-24","unchecked","norowclick"],[4,"ngIf"],[3,"ss-locale"]],template:function(e,t){1&e&&(a.Ub(0,"label",0),a.Ub(1,"input",1),a.bc("ngModelChange",function(e){return t.value=e})("blur",function(){return t.onBlur()}),a.Tb(),a.Pb(2,"svg-icon",2),a.Pb(3,"svg-icon",3),a.Mc(4,h,4,1,"span",4),a.Tb()),2&e&&(a.Gb("pointer",!t.disabled),a.nc("id",t.elementId)("matTooltip",t.title)("matTooltipDisabled",!t.title),a.Cb(1),a.nc("name",t.name)("checked",t.isChecked())("ngModel",t.value)("value",t.inputValue)("disabled",t.disabled),a.Cb(3),a.nc("ngIf",t.localeTitle))},directives:[r.a,c.z,c.d,c.s,c.v,l.b,d.o,u.a],styles:[".ss-radio[_ngcontent-%COMP%]   .checked[_ngcontent-%COMP%], .ss-radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.ss-radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked ~ .checked[_ngcontent-%COMP%]{display:inline-block}.ss-radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked ~ .unchecked[_ngcontent-%COMP%]{display:none}.checked[_ngcontent-%COMP%]{color:var(--primary-1);fill:var(--primary-1)}.unchecked[_ngcontent-%COMP%]{color:var(--font-color-4);fill:var(--font-color-4)}"]}),e=s=Object(o.b)([Object(n.a)()],e),e})()},LmaU:function(e,t,i){"use strict";i.d(t,"a",function(){return O});var s=i("mrSG"),o=i("fXoL"),c=i("VfN6"),n=i("pLZG"),a=i("SxV6"),r=i("NJqk"),l=i("ofXK"),d=i("Uz6v"),u=i("ceUb"),h=i("Qu3c"),b=i("BY4g");function m(e,t){if(1&e){const e=o.Vb();o.Ub(0,"button",17),o.bc("click",function(){return o.Ec(e),o.fc(3).enableEditMode()}),o.Oc(1,"Edit"),o.Tb()}if(2&e){const e=o.fc(3);o.nc("id",e.formId+"-edit-form")("ss-page-name",e.dialogPageName)}}function g(e,t){if(1&e&&(o.Sb(0),o.Mc(1,m,2,2,"button",16),o.Rb()),2&e){const e=o.fc(2);o.Cb(1),o.nc("ngIf",!e.readOnly&&e.canEdit&&!e.ies.isEditMode(e.editSection))}}function p(e,t){if(1&e&&(o.Ub(0,"div",9),o.Ub(1,"div",10),o.Ub(2,"div",11),o.Ub(3,"div",12),o.Ub(4,"span",13),o.Oc(5),o.Tb(),o.Oc(6,"\xa0"),o.Tb(),o.Ub(7,"div",14),o.Mc(8,g,2,1,"ng-container",15),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.fc();o.Cb(4),o.nc("ss-locale",e.dialogTitleLocale)("ss-page-name",e.pageName),o.Cb(1),o.Pc(e.dialogTitle),o.Cb(3),o.nc("ss-permission",e.editPermissionRequired)}}function f(e,t){if(1&e&&(o.Ub(0,"div",18),o.Oc(1),o.Tb()),2&e){const e=o.fc();o.Cb(1),o.Pc(e.bannerMessage)}}function k(e,t){if(1&e&&(o.Ub(0,"div",19),o.Pb(1,"div",20),o.Tb()),2&e){const e=o.fc();o.Gb("active",e.isLoading)}}const v=["*",[["","form-buttons",""]]],C=["*","[form-buttons]"];let O=(()=>{let e=class{constructor(e,t,i){this.ies=e,this._log=t,this._localizationService=i,this.isFormWidth=!1,this.rightAlignButtons=!1,this.editSection=null,this.dialogTitle="",this.dialogTitleLocale="",this.dataClassName=null,this.canEdit=!0,this.editPermissionRequired=null,this.readOnly=!1,this.hideTitleBar=!1,this.showFormBackgroundColor=!0,this.bannerMessage=null,this.disableFormOnCancel=!0,this.pageName=null,this.formId="form",this.fullHeight=!1,this.save=new o.n,this.cancel=new o.n,this.assignModel=new o.n,this.saveSuccess=new o.n,this.saveFail=new o.n,this.isLoading=!1,this._reloadDataExpiration=3e4,this.dialogPageName="formdialog"}ngOnInit(){this._localizationService.loadResourcePage(this.dialogPageName),this.dataClassName&&(this.isLoading=!0,this.ies.dataLoaded.pipe(Object(c.b)(this),Object(n.a)(e=>e.type===this.dataClassName)).subscribe(e=>{this.loadData(e)}),this.ies.data[this.dataClassName]&&this.loadData(this.ies.data[this.dataClassName])),this._updateStatus(),this.ssForm&&this.ssForm.statusChanges.pipe(Object(c.b)(this)).subscribe(this._updateStatus.bind(this))}loadData(e){this.ies.patchViewModel(this.ssForm,e.data),this.assignModel&&this.assignModel.observers.length>0&&this.assignModel.emit(e),this.ssForm.markAsPristine(),this.isLoading=!1}enableEditMode(){this.dataClassName&&(new Date).getTime()-this.ies.data[this.dataClassName].loadTime.getTime()>this._reloadDataExpiration?this._refreshAndEnableEdit():this.ies.enableEditMode(this.editSection,this.ssForm)}saveForm(){if(!this.ssForm||this.ssForm.valid)if(this.ies.showValidationMessages=!1,this.save.observers.length>0)this.save.emit();else if(null!==this.dataClassName){const e=this.ies.createUpdateModel(this.ssForm);this._log.Verbose("Update Model",e),this.ies.saveDataObject(this.dataClassName,e).pipe(Object(a.a)()).subscribe({next:e=>{this._log.Verbose("Save Result ",e),this.ies.disableEditMode(null,!1),this.ies.data[this.dataClassName].data=e,this.saveSuccess.observers&&this.saveSuccess.observers.length>0&&this.saveSuccess.emit(e)},error:e=>{this.ies.assignErrorToFormGroup(this.ssForm,e),this.saveFail.observers&&this.saveFail.observers.length>0&&this.saveFail.emit(e)}})}else this.ies.disableEditMode(this.editSection,!1);else this.ies.showValidationMessages=!0}cancelForm(){"INPUT"!==document.activeElement.tagName&&(this.disableFormOnCancel&&this.ies.disableEditMode(this.editSection,!0),this.cancel.observers.length>0&&this.cancel.emit())}_refreshAndEnableEdit(){this.isLoading=!0,this.ies.dataLoaded.pipe(Object(a.a)(),Object(n.a)(e=>e.type===this.dataClassName)).subscribe(e=>{this.ies.patchViewModel(this.ssForm,e),this.assignModel&&this.assignModel.observers.length>0&&this.assignModel.emit(e),this.ssForm.markAsPristine(),this.ies.enableEditMode(this.editSection,this.ssForm),this.isLoading=!1}),this.ies.refreshDataItem(this.dataClassName)}_updateStatus(){this.isSaveDisabled=this.ies.isSaveDisabled(this.editSection)}};return e.\u0275fac=function(t){return new(t||e)(o.Ob(r.B),o.Ob(r.fb),o.Ob(r.F))},e.\u0275cmp=o.Ib({type:e,selectors:[["ss-form-dialog"]],inputs:{isFormWidth:"isFormWidth",rightAlignButtons:"rightAlignButtons",ssForm:"ssForm",editSection:"editSection",dialogTitle:"dialogTitle",dialogTitleLocale:"dialogTitleLocale",dataClassName:"dataClassName",canEdit:"canEdit",editPermissionRequired:"editPermissionRequired",readOnly:"readOnly",hideTitleBar:"hideTitleBar",showFormBackgroundColor:"showFormBackgroundColor",bannerMessage:"bannerMessage",disableFormOnCancel:"disableFormOnCancel",pageName:"pageName",formId:"formId",fullHeight:"fullHeight"},outputs:{save:"save",cancel:"cancel",assignModel:"assignModel",saveSuccess:"saveSuccess",saveFail:"saveFail"},ngContentSelectors:C,decls:16,vars:27,consts:[["class","segmentTitle",4,"ngIf"],["id","form-banner","class","banner",4,"ngIf"],["class","ui segment inverted dimmer",3,"active",4,"ngIf"],[3,"ssForm","editSection"],[1,"formButtons"],["ss-locale","cancel",1,"thy","basic","button",3,"id","ss-page-name","click"],[2,"display","inline-block",3,"matTooltip"],["type","button","autofocus","","ss-locale","save",1,"thy","primary","button",3,"id","disabled","ss-page-name","click"],["customFormButtons",""],[1,"segmentTitle"],[1,"ui","aligned","grid"],[1,"middle","aligned","row"],[1,"eight","wide","column","segmentName"],[3,"ss-locale","ss-page-name"],[1,"eight","wide","right","aligned","column"],[4,"ss-permission"],["class","link-button","ss-locale","edit",3,"id","ss-page-name","click",4,"ngIf"],["ss-locale","edit",1,"link-button",3,"id","ss-page-name","click"],["id","form-banner",1,"banner"],[1,"ui","segment","inverted","dimmer"],[1,"ui","loader"]],template:function(e,t){if(1&e&&(o.mc(v),o.Ub(0,"div"),o.Mc(1,p,9,4,"div",0),o.Mc(2,f,2,1,"div",1),o.Ub(3,"div"),o.Mc(4,k,2,2,"div",2),o.Pb(5,"ss-validation-summary",3),o.lc(6),o.Tb(),o.Ub(7,"div",4),o.Ub(8,"button",5),o.bc("click",function(){return t.cancelForm()}),o.Oc(9,"Cancel"),o.Tb(),o.Ub(10,"div",6),o.Ub(11,"button",7),o.bc("click",function(){return t.saveForm()}),o.Oc(12,"Save"),o.Tb(),o.Tb(),o.Tb(),o.Ub(13,"div",4,8),o.lc(15,1),o.Tb(),o.Tb()),2&e){const e=o.Ac(14);o.Gb("form-dialog",t.isFormWidth)("form-dialog-container",t.showFormBackgroundColor&&!t.hideTitleBar&&t.ies.isEditMode(t.editSection))("full",t.fullHeight),o.Cb(1),o.nc("ngIf",!t.hideTitleBar),o.Cb(1),o.nc("ngIf",t.bannerMessage),o.Cb(1),o.Gb("noTopBorder",t.bannerMessage)("full",t.fullHeight),o.Cb(1),o.nc("ngIf",t.dataClassName),o.Cb(1),o.nc("ssForm",t.ssForm)("editSection",t.editSection),o.Cb(2),o.Gb("right-align-buttons",t.rightAlignButtons)("hide",t.readOnly||!t.ies.isEditMode(t.editSection)||e&&e.children.length>0),o.Cb(1),o.nc("id",t.formId+"-edit-form-cancel")("ss-page-name",t.dialogPageName),o.Cb(2),o.nc("matTooltip",t.ies.okButtonTooltip),o.Cb(1),o.nc("id",t.formId+"-edit-form-save")("disabled",t.isSaveDisabled||t.ies.isSaving)("ss-page-name",t.dialogPageName),o.Cb(2),o.Gb("hide",t.readOnly||!t.ies.isEditMode(t.editSection)||!e||0===e.children.length)}},directives:[l.o,d.a,u.a,h.a,b.a],styles:[".form-dialog[_ngcontent-%COMP%]{max-width:780px}.form-dialog-container[_ngcontent-%COMP%], .segmentTitle[_ngcontent-%COMP%]{background:var(--background-2)}.segmentTitle[_ngcontent-%COMP%]{padding-left:11px;padding-right:11px;margin-bottom:23px;margin-top:10px}.segmentName[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700}.formButtons[_ngcontent-%COMP%]{padding:22px;text-align:right}.ui.segment.extra.noTopBorder[_ngcontent-%COMP%]{border-top:none!important}div.full[_ngcontent-%COMP%]{height:calc(100% - 3px)}.right-align-buttons[_ngcontent-%COMP%]{padding-right:0}"]}),e=Object(s.b)([Object(c.a)()],e),e})()}}]);