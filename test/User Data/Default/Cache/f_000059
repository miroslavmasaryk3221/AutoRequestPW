(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{BY4g:function(e,s,o){"use strict";o.d(s,"a",function(){return i});var t=o("fXoL"),a=o("NJqk");let i=(()=>{class e{constructor(e,s,o){this.templateRef=e,this.viewContainer=s,this._userService=o,this._hasView=!1}ngOnChanges(e){e.permission&&(!this.permission||this._userService.hasRolePermission(this.permission)?this._hasView||(this.viewContainer.createEmbeddedView(this.templateRef),this._hasView=!0):this._hasView&&(this.viewContainer.clear(),this._hasView=!1))}}return e.\u0275fac=function(s){return new(s||e)(t.Ob(t.M),t.Ob(t.Q),t.Ob(a.kb))},e.\u0275dir=t.Jb({type:e,selectors:[["","ss-permission",""]],inputs:{permission:["ss-permission","permission"]},features:[t.Ab]}),e})()},WsiS:function(e,s,o){"use strict";o.d(s,"a",function(){return G});var t=o("mrSG"),a=o("fXoL"),i=o("3Pt+"),r=o("VfN6"),c=o("r35h"),n=o("vHvj"),d=o("SxV6"),l=o("CiM1"),b=o("Yf8z"),u=o("NJqk"),h=o("0IaG"),p=o("ofXK"),m=o("Ljv0"),w=o("Uz6v"),g=o("d91t"),f=o("taKe"),P=o("OFbc"),k=o("ceUb"),y=o("Qu3c"),v=o("+bz6");const C=["enterPasswordInput"],T=["createPasswordInput"],S=["currentPasswordInput"];function L(e,s){if(1&e&&(a.Ub(0,"div",15),a.Pb(1,"svg-icon",16),a.Ub(2,"h2"),a.Ub(3,"span",17),a.Oc(4,"DoubleLock"),a.Tb(),a.Oc(5),a.Tb(),a.Ub(6,"span",18),a.Oc(7,"Please create your DoubleLock password to gain access to the requested resource."),a.Tb(),a.Tb()),2&e){const e=a.fc(3);a.Cb(3),a.nc("ss-page-name",e.pageName),a.Cb(2),a.Qc(" - ",e.secretName,""),a.Cb(1),a.nc("ss-page-name",e.pageName)}}function F(e,s){if(1&e){const e=a.Vb();a.Ub(0,"thy-form-layout-row",19),a.Ub(1,"div",20),a.Ub(2,"button",21),a.bc("click",function(){return a.Ec(e),a.fc(3).cancel()}),a.Oc(3,"Cancel"),a.Tb(),a.Ub(4,"div",22),a.Ub(5,"button",23),a.bc("click",function(){return a.Ec(e),a.fc(3).createPassword()}),a.Oc(6,"Continue"),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.fc(3);a.nc("showActions",!1),a.Cb(2),a.nc("ss-page-name",e.pageName),a.Cb(2),a.nc("matTooltip",e.ies.okButtonTooltip),a.Cb(1),a.nc("ss-page-name",e.pageName)("disabled",e.ies.isSaveDisabled("createPasswordFormGroup")||e.isSaving)}}function U(e,s){if(1&e){const e=a.Vb();a.Ub(0,"div",3),a.Mc(1,L,8,3,"div",4),a.Ub(2,"div",5),a.Pb(3,"thy-loading-dimmer",6),a.gc(4,"async"),a.gc(5,"ssLocale"),a.Pb(6,"ss-validation-summary",7),a.Ub(7,"thy-form-layout",8),a.Ub(8,"thy-form-layout-row",9),a.gc(9,"async"),a.gc(10,"ssLocale"),a.Sb(11,10),a.Ub(12,"ss-form-input",11,12),a.bc("keyup",function(s){return a.Ec(e),a.fc(2).checkEnter(s)}),a.Tb(),a.Rb(),a.Tb(),a.Ub(14,"thy-form-layout-row",9),a.gc(15,"async"),a.gc(16,"ssLocale"),a.Sb(17,10),a.Ub(18,"ss-form-input",13),a.bc("keyup",function(s){return a.Ec(e),a.fc(2).checkEnter(s)}),a.Tb(),a.Rb(),a.Tb(),a.Mc(19,F,7,5,"thy-form-layout-row",14),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.fc(2);a.Gb("dbl-page",!e.isModal),a.nc("formGroup",e.createPasswordForm),a.Cb(1),a.nc("ngIf",!e.isModal),a.Cb(2),a.nc("active",e.isSaving)("isFullscreen",!1)("displayText",a.hc(4,26,a.ic(5,28,"creating-doublelock-password",e.pageName))),a.Cb(3),a.nc("ssForm",e.createPasswordForm),a.Cb(1),a.nc("noBottomMargin",!0),a.Cb(1),a.nc("labelText",a.hc(9,31,a.ic(10,33,"password",e.pageName)))("showActions",!1)("forceRequiredMarker",!0),a.Cb(4),a.nc("type",e.formInputType.Password)("alwaysHidePasswordGenerate",!0)("inputWidthPercent",100)("showModifyShowLink",!1)("placeholder",e.enterDoubleLockPassword),a.Cb(2),a.nc("labelText",a.hc(15,36,a.ic(16,38,"confirm-password",e.pageName)))("showActions",!1)("forceRequiredMarker",!0),a.Cb(4),a.nc("type",e.formInputType.Password)("inputWidthPercent",100)("showModifyShowLink",!1)("alwaysHidePasswordGenerate",!0)("placeholder",e.confirmDoubleLockPassword),a.Cb(1),a.nc("ngIf",e.showButtons)}}function M(e,s){if(1&e&&(a.Ub(0,"div",15),a.Pb(1,"svg-icon",16),a.Ub(2,"h2"),a.Ub(3,"span",17),a.Oc(4,"DoubleLock"),a.Tb(),a.Oc(5),a.Tb(),a.Ub(6,"span",30),a.Oc(7,"Please enter your DoubleLock password to gain access to the requested resource."),a.Tb(),a.Tb()),2&e){const e=a.fc(3);a.Cb(3),a.nc("ss-page-name",e.pageName),a.Cb(2),a.Qc(" - ",e.secretName,""),a.Cb(1),a.nc("ss-page-name",e.pageName)}}function O(e,s){if(1&e){const e=a.Vb();a.Ub(0,"div",31),a.Ub(1,"button",32),a.bc("click",function(){return a.Ec(e),a.fc(3).cancel()}),a.Oc(2,"Cancel"),a.Tb(),a.Ub(3,"div",22),a.Ub(4,"button",33),a.bc("click",function(){return a.Ec(e),a.fc(3).submitPassword()}),a.Oc(5,"Continue"),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.fc(3);a.Cb(1),a.nc("ss-page-name",e.pageName)("disabled",e.isSaving),a.Cb(2),a.nc("matTooltip",e.ies.okButtonTooltip),a.Cb(1),a.nc("ss-page-name",e.pageName)("disabled",e.ies.isSaveDisabled("enterPasswordFormGroup")||e.isSaving)}}function N(e,s){if(1&e){const e=a.Vb();a.Ub(0,"div",34),a.Ub(1,"button",35),a.bc("click",function(){return a.Ec(e),a.fc(3).forgotPassword()}),a.Oc(2,"Forgot DoubleLock Password?"),a.Tb(),a.Tb()}if(2&e){const e=a.fc(3);a.Cb(1),a.nc("ss-page-name",e.pageName)}}function I(e,s){if(1&e){const e=a.Vb();a.Ub(0,"div",3),a.Ub(1,"div",24),a.Mc(2,M,8,3,"div",4),a.Pb(3,"ss-validation-summary",25),a.Ub(4,"div",5),a.Pb(5,"thy-loading-dimmer",6),a.gc(6,"async"),a.gc(7,"ssLocale"),a.Ub(8,"thy-form-layout",8),a.Ub(9,"thy-form-layout-row",9),a.gc(10,"async"),a.gc(11,"ssLocale"),a.Sb(12,10),a.Ub(13,"ss-form-input",26,27),a.bc("keyup",function(s){return a.Ec(e),a.fc(2).checkEnter(s)}),a.Tb(),a.Rb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Mc(15,O,6,5,"div",28),a.Mc(16,N,3,1,"div",29),a.Tb()}if(2&e){const e=a.fc(2);a.Gb("dbl-page",!e.isModal),a.nc("formGroup",e.enterPasswordForm),a.Cb(2),a.nc("ngIf",!e.isModal),a.Cb(1),a.nc("ssForm",e.enterPasswordForm),a.Cb(2),a.nc("active",e.isSaving)("isFullscreen",!1)("displayText",a.hc(6,19,a.ic(7,21,"verifying-password",e.pageName))),a.Cb(3),a.nc("noBottomMargin",!0),a.Cb(1),a.nc("labelText",a.hc(10,24,a.ic(11,26,"password",e.pageName)))("showActions",!1)("forceRequiredMarker",!0),a.Cb(4),a.nc("type",e.formInputType.Password)("inputWidthPercent",100)("showModifyShowLink",!1)("alwaysHidePasswordGenerate",!0)("placeholder",e.enterDoubleLockPassword),a.Cb(2),a.nc("ngIf",e.showButtons),a.Cb(1),a.nc("ngIf",!e.isModal)}}function E(e,s){if(1&e){const e=a.Vb();a.Ub(0,"thy-form-layout-row",19),a.Ub(1,"div",20),a.Ub(2,"button",21),a.bc("click",function(){return a.Ec(e),a.fc(3).cancel()}),a.Oc(3,"Cancel"),a.Tb(),a.Ub(4,"div",22),a.Ub(5,"button",42),a.bc("click",function(){return a.Ec(e),a.fc(3).changePassword()}),a.Oc(6,"Continue"),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.fc(3);a.nc("showActions",!1),a.Cb(2),a.nc("ss-page-name",e.pageName),a.Cb(2),a.nc("matTooltip",e.ies.okButtonTooltip),a.Cb(1),a.nc("ss-page-name",e.pageName)("disabled",e.ies.isSaveDisabled("changePasswordFormGroup")||e.isSaving)}}function _(e,s){if(1&e){const e=a.Vb();a.Ub(0,"div",3),a.Ub(1,"div",24),a.Pb(2,"ss-validation-summary",36),a.Ub(3,"div",37),a.Pb(4,"thy-loading-dimmer",6),a.gc(5,"async"),a.gc(6,"ssLocale"),a.Ub(7,"thy-form-layout",8),a.Ub(8,"thy-form-layout-row",9),a.gc(9,"async"),a.gc(10,"ssLocale"),a.Sb(11,10),a.Ub(12,"ss-form-input",38,39),a.bc("keyup",function(s){return a.Ec(e),a.fc(2).checkEnter(s)}),a.Tb(),a.Rb(),a.Tb(),a.Ub(14,"thy-form-layout-row",9),a.gc(15,"async"),a.gc(16,"ssLocale"),a.Sb(17,10),a.Ub(18,"ss-form-input",40),a.bc("keyup",function(s){return a.Ec(e),a.fc(2).checkEnter(s)}),a.Tb(),a.Rb(),a.Tb(),a.Ub(19,"thy-form-layout-row",9),a.gc(20,"async"),a.gc(21,"ssLocale"),a.Sb(22,10),a.Ub(23,"ss-form-input",41),a.bc("keyup",function(s){return a.Ec(e),a.fc(2).checkEnter(s)}),a.Tb(),a.Rb(),a.Tb(),a.Mc(24,E,7,5,"thy-form-layout-row",14),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.fc(2);a.nc("formGroup",e.changePasswordForm),a.Cb(2),a.nc("ssForm",e.changePasswordForm),a.Cb(2),a.nc("active",e.isSaving)("isFullscreen",!1)("displayText",a.hc(5,31,a.ic(6,33,"verifying-password",e.pageName))),a.Cb(3),a.nc("noBottomMargin",!0),a.Cb(1),a.nc("labelText",a.hc(9,36,a.ic(10,38,"password",e.pageName)))("showActions",!1)("forceRequiredMarker",!0),a.Cb(4),a.nc("type",e.formInputType.Password)("inputWidthPercent",100)("showModifyShowLink",!1)("alwaysHidePasswordGenerate",!0)("placeholder",e.enterDoubleLockPassword),a.Cb(2),a.nc("labelText",a.hc(15,41,a.ic(16,43,"new-password",e.pageName)))("showActions",!1)("forceRequiredMarker",!0),a.Cb(4),a.nc("type",e.formInputType.Password)("alwaysHidePasswordGenerate",!0)("inputWidthPercent",100)("showModifyShowLink",!0)("placeholder",e.enterNewDoubleLockPassword),a.Cb(1),a.nc("labelText",a.hc(20,46,a.ic(21,48,"confirm-password",e.pageName)))("showActions",!1)("forceRequiredMarker",!0),a.Cb(4),a.nc("type",e.formInputType.Password)("inputWidthPercent",100)("showModifyShowLink",!0)("alwaysHidePasswordGenerate",!0)("placeholder",e.confirmDoubleLockPassword),a.Cb(1),a.nc("ngIf",e.showButtons)}}function D(e,s){if(1&e&&(a.Ub(0,"div"),a.Mc(1,U,20,41,"div",1),a.Mc(2,I,17,29,"div",1),a.Mc(3,_,25,51,"div",2),a.Tb()),2&e){const e=a.fc();a.Cb(1),a.nc("ngIf",e.action===e.doubleLockPasswordAction.Create),a.Cb(1),a.nc("ngIf",e.action===e.doubleLockPasswordAction.Enter),a.Cb(1),a.nc("ngIf",e.action===e.doubleLockPasswordAction.Change)}}let G=(()=>{let e=class{constructor(e,s,o,t,r){this._ies=e,this._log=s,this._doubleLockService=o,this._localizationService=t,this._dialogService=r,this.passwordSuccess=new a.n,this.passwordFail=new a.n,this.cancelClicked=new a.n,this.showButtons=!0,this.doubleLockPasswordAction=b.a,this.isModal=!1,this.isCancelling=!1,this.isSaving=!1,this.pageName="secretactions",this.isLoading=!1,this.isValid=!1,this.enterPasswordForm=new i.k({doubleLockPassword:new i.h("",i.C.required)}),this.formInputType=n.a,this.createPasswordForm=new i.k({password:new i.h("",[l.a.requiredNotEmpty,l.a.mustMatchSiblingControlValue("confirmDoubleLockPassword")]),confirmDoubleLockPassword:new i.h("",[l.a.requiredNotEmpty,l.a.mustMatchSiblingControlValue("password")])}),this.changePasswordForm=new i.k({currentPassword:new i.h("",l.a.requiredNotEmpty),newPassword:new i.h("",[l.a.requiredNotEmpty,l.a.mustMatchSiblingControlValue("confirmNewDoubleLockPassword")]),confirmNewDoubleLockPassword:new i.h("",[l.a.requiredNotEmpty,l.a.mustMatchSiblingControlValue("newPassword")])}),this.enterDoubleLockPassword="enter-doublelock",this.confirmDoubleLockPassword="confirm-doublelock",this.enterNewDoubleLockPassword="enter-new-doublelock",this.ies=e}ngOnInit(){this._localizationService.getPageMessage("secretactions","enter-doublelock").pipe(Object(d.a)()).subscribe(e=>{this.enterDoubleLockPassword=e}),this._localizationService.getPageMessage("secretactions","confirm-doublelock").pipe(Object(d.a)()).subscribe(e=>{this.confirmDoubleLockPassword=e}),this._localizationService.getPageMessage("secretactions","enter-new-doublelock").pipe(Object(d.a)()).subscribe(e=>{this.enterNewDoubleLockPassword=e})}ngOnChanges(e){e.action&&(this.action===this.doubleLockPasswordAction.Create?(this.createPasswordForm.valueChanges.pipe(Object(r.b)(this)).subscribe(e=>{this.action===b.a.Create&&(this.isValid=this.createPasswordForm.valid)}),this._ies.enableEditMode("createPasswordFormGroup",this.createPasswordForm)):this.action===this.doubleLockPasswordAction.Enter?(this.enterPasswordForm.valueChanges.pipe(Object(r.b)(this)).subscribe(e=>{this.action===b.a.Enter&&(this.isValid=this.enterPasswordForm.valid)}),this._ies.enableEditMode("enterPasswordFormGroup",this.enterPasswordForm)):(this.changePasswordForm.valueChanges.pipe(Object(r.b)(this)).subscribe(e=>{this.action===b.a.Change&&(this.isValid=this.changePasswordForm.valid)}),this._ies.enableEditMode("changePasswordFormGroup",this.changePasswordForm)))}ngAfterViewInit(){this.enterPasswordInput&&this.enterPasswordInput.first&&this.enterPasswordInput.first.focus(),this.enterPasswordInput.changes.pipe(Object(r.b)(this)).subscribe(e=>{e&&e.first&&e.first.focus()}),this.currentPasswordInput&&this.currentPasswordInput.first&&this.currentPasswordInput.first.focus(),this.currentPasswordInput.changes.pipe(Object(r.b)(this)).subscribe(e=>{e&&e.first&&e.first.focus()}),this.createPasswordInput&&this.createPasswordInput.first&&this.createPasswordInput.first.focus(),this.createPasswordInput.changes.pipe(Object(r.b)(this)).subscribe(e=>{e&&e.first&&e.first.focus()})}checkEnter(e){"Enter"===e.key&&this.save()}save(){this.isSaving=!0,this.action===b.a.Enter&&this.submitPassword(),this.action===b.a.Create&&this.createPassword(),this.action===b.a.Change&&this.changePassword()}changePassword(){if(this.isLoading=!0,!this.changePasswordForm.valid)return this._ies.showValidationMessages=!0,void(this.isSaving=!1);this._doubleLockService.updateDoubleLockPassword(this.changePasswordForm.controls.currentPassword.value,this.changePasswordForm.controls.newPassword.value).pipe(Object(d.a)()).subscribe({next:e=>{e?this.passwordSuccess.emit():this.passwordFail.emit(),this.disableEdit()},error:e=>{this._ies.assignErrorToFormGroup(this.changePasswordForm,e),this.isSaving=!1}})}createPassword(){if(this.isSaving=!0,!this.createPasswordForm.valid)return this._ies.showValidationMessages=!0,void(this.isSaving=!1);this._doubleLockService.createDoubleLockPassword(this.createPasswordForm.controls.password.value).pipe(Object(d.a)()).subscribe({next:e=>{this._log.Verbose("Password Create Result: ",e),this.passwordSuccess.emit(),this.disableEdit()},error:e=>{this._ies.assignErrorToFormGroup(this.createPasswordForm,e),this.isSaving=!1}})}submitPassword(){if(this.isLoading=!0,!this.enterPasswordForm.valid)return this._ies.showValidationMessages=!0,void(this.isSaving=!1);this._doubleLockService.setUserDoubleLockPassword(this.enterPasswordForm.controls.doubleLockPassword.value).pipe(Object(d.a)()).subscribe({next:e=>{e?this.passwordSuccess.emit():this.passwordFail.emit(),this.disableEdit()},error:e=>{this._ies.assignErrorToFormGroup(this.enterPasswordForm,e),this.isSaving=!1}})}cancel(){this.isCancelling=!0,this.disableEdit(),this.cancelClicked.emit()}forgotPassword(){this.cancel(),this._dialogService.open(c.a)}disableEdit(){this._ies.showValidationMessages=!1,this._ies.isEditMode("enterPasswordFormGroup")&&(this._ies.disableEditMode("enterPasswordFormGroup",!0),this.enterPasswordForm.setErrors(null),this.enterPasswordForm.markAsPristine(),this.enterPasswordForm.markAsUntouched(),this.enterPasswordForm.updateValueAndValidity()),this._ies.isEditMode("createPasswordFormGroup")&&(this._ies.disableEditMode("createPasswordFormGroup",!0),this.createPasswordForm.setErrors(null),this.createPasswordForm.markAsPristine(),this.createPasswordForm.markAsUntouched(),this.createPasswordForm.updateValueAndValidity()),this._ies.isEditMode("changePasswordFormGroup")&&(this._ies.disableEditMode("changePasswordFormGroup",!0),this.changePasswordForm.setErrors(null),this.changePasswordForm.markAsPristine(),this.changePasswordForm.markAsUntouched(),this.changePasswordForm.updateValueAndValidity())}};return e.\u0275fac=function(s){return new(s||e)(a.Ob(u.B),a.Ob(u.fb),a.Ob(u.r),a.Ob(u.F),a.Ob(h.c))},e.\u0275cmp=a.Ib({type:e,selectors:[["ss-double-lock-password"]],viewQuery:function(e,s){if(1&e&&(a.Uc(C,1),a.Uc(T,1),a.Uc(S,1)),2&e){let e;a.zc(e=a.cc())&&(s.enterPasswordInput=e),a.zc(e=a.cc())&&(s.createPasswordInput=e),a.zc(e=a.cc())&&(s.currentPasswordInput=e)}},inputs:{showButtons:"showButtons",action:"action",isModal:"isModal",secretName:"secretName"},outputs:{passwordSuccess:"passwordSuccess",passwordFail:"passwordFail",cancelClicked:"cancelClicked"},features:[a.Ab],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup","dbl-page",4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","lock-block",4,"ngIf"],[1,"password-form","thy-pos-rel"],[3,"active","isFullscreen","displayText"],["editSection","createPasswordFormGroup",3,"ssForm"],[3,"noBottomMargin"],[3,"labelText","showActions","forceRequiredMarker"],["value-column",""],["editSection","createPasswordFormGroup","formControlName","password",3,"type","alwaysHidePasswordGenerate","inputWidthPercent","showModifyShowLink","placeholder","keyup"],["createPasswordInput",""],["editSection","createPasswordFormGroup","formControlName","confirmDoubleLockPassword",3,"type","inputWidthPercent","showModifyShowLink","alwaysHidePasswordGenerate","placeholder","keyup"],[3,"showActions",4,"ngIf"],[1,"lock-block"],["name","lock",1,"icon-88","icon-light"],["ss-locale","doublelock",3,"ss-page-name"],["ss-locale","enter-double-lock",3,"ss-page-name"],[3,"showActions"],["value-column","",2,"width","300px","text-align","right"],["ss-locale","cancel",1,"thy","basic","button",3,"ss-page-name","click"],[2,"display","inline-block",3,"matTooltip"],["ss-locale","create-doublelock-password",1,"thy","primary","button",3,"ss-page-name","disabled","click"],[1,"ui","form"],["editSection","enterPasswordFormGroup",3,"ssForm"],["formControlName","doubleLockPassword","editSection","enterPasswordFormGroup",3,"type","inputWidthPercent","showModifyShowLink","alwaysHidePasswordGenerate","placeholder","keyup"],["enterPasswordInput",""],["style","margin-top:24px",4,"ngIf"],["class","forgot-password","style","margin-top:36px",4,"ngIf"],["ss-locale","please-enter-doublelock",3,"ss-page-name"],[2,"margin-top","24px"],["type","button","ss-locale","cancel",1,"thy","basic","button",3,"ss-page-name","disabled","click"],["type","button","ss-locale","continue",1,"thy","primary","button",3,"ss-page-name","disabled","click"],[1,"forgot-password",2,"margin-top","36px"],["type","button","ss-locale","forgot-doublelock",1,"link-button",3,"ss-page-name","click"],["editSection","changePasswordFormGroup",3,"ssForm"],[1,"change-password-form","thy-pos-rel"],["formControlName","currentPassword","editSection","changePasswordFormGroup",3,"type","inputWidthPercent","showModifyShowLink","alwaysHidePasswordGenerate","placeholder","keyup"],["currentPasswordInput",""],["editSection","changePasswordFormGroup","formControlName","newPassword",3,"type","alwaysHidePasswordGenerate","inputWidthPercent","showModifyShowLink","placeholder","keyup"],["editSection","changePasswordFormGroup","formControlName","confirmNewDoubleLockPassword",3,"type","inputWidthPercent","showModifyShowLink","alwaysHidePasswordGenerate","placeholder","keyup"],["ss-locale","change-doublelock-password",1,"thy","primary","button",3,"ss-page-name","disabled","click"]],template:function(e,s){1&e&&a.Mc(0,D,4,3,"div",0),2&e&&a.nc("ngIf",!s.isCancelling)},directives:[p.o,i.t,i.l,m.h,w.a,g.e,g.f,f.a,i.s,i.j,P.b,k.a,y.a],pipes:[p.b,v.a],styles:[".header[_ngcontent-%COMP%]{font-weight:700;width:200px;max-width:200px;min-width:200px;color:var(--font-color-1)}.lock-block[_ngcontent-%COMP%]{text-align:center}.forgot-password[_ngcontent-%COMP%], .lock-block[_ngcontent-%COMP%]{margin-bottom:20px}.dbl-page[_ngcontent-%COMP%]   .password-form[_ngcontent-%COMP%]{text-align:left;width:450px;margin:auto}"]}),e=Object(t.b)([Object(r.a)()],e),e})()},Yf8z:function(e,s,o){"use strict";o.d(s,"a",function(){return t});var t=function(e){return e.Create="create",e.Enter="enter",e.Change="change",e}({})},d52A:function(e,s,o){"use strict";o.d(s,"a",function(){return h});var t=o("0IaG"),a=o("r35h"),i=o("Ssny"),r=o("fXoL"),c=o("+znE"),n=o("ceUb"),d=o("WsiS"),l=o("ofXK");const b=["dblPassword"];function u(e,s){if(1&e){const e=r.Vb();r.Ub(0,"button",9),r.bc("click",function(){return r.Ec(e),r.fc().forgotPassword()}),r.Oc(1,"Forgot DoubleLock Password?"),r.Tb()}}let h=(()=>{class e{constructor(e,s,o,t){this.context=e,this.dialog=s,this._dialogService=o,this._localizationService=t,this.isCreate=!1}ngOnInit(){this._localizationService.loadResourcePage("doublelock"),this.isCreate="create"===this.context.action}passwordSuccess(){this.dialog.close({isApproved:!0})}passwordFail(){this.dialog.close({isApproved:!0})}cancel(){this.dblPassword.cancel(),this.dialog.close({isApproved:!1})}forgotPassword(){this.dialog.close({isApproved:!1}),this._dialogService.open(a.a)}}return e.\u0275fac=function(s){return new(s||e)(r.Ob(t.a),r.Ob(t.i),r.Ob(t.c),r.Ob(c.a))},e.\u0275cmp=r.Ib({type:e,selectors:[["ss-modal-double-lock-password"]],viewQuery:function(e,s){if(1&e&&r.Uc(b,3),2&e){let e;r.zc(e=r.cc())&&(s.dblPassword=e.first)}},features:[r.Bb([],[i.a])],decls:14,vars:8,consts:[["mat-dialog-title","","ss-page-name","doublelock",3,"ss-locale"],["mat-dialog-content","",1,"double-modal"],[3,"showButtons","isModal","action","passwordSuccess","passwordFail"],["dblPassword",""],["mat-dialog-actions",""],[1,"grid-filter-header"],["class","forgot-link link-button","ss-page-name","secretactions","ss-locale","forgot-doublelock",3,"click",4,"ngIf"],["ss-locale","cancel","ss-page-name","common",1,"thy","basic","button",3,"disabled","click"],["ss-page-name","secretactions",1,"thy","primary","button",3,"disabled","ss-locale","click"],["ss-page-name","secretactions","ss-locale","forgot-doublelock",1,"forgot-link","link-button",3,"click"]],template:function(e,s){if(1&e){const e=r.Vb();r.Ub(0,"h1",0),r.Oc(1,"\nEnter DoubleLock Password\n"),r.Tb(),r.Ub(2,"div",1),r.Ub(3,"ss-double-lock-password",2,3),r.bc("passwordSuccess",function(){return s.passwordSuccess()})("passwordFail",function(){return s.passwordFail()}),r.Tb(),r.Tb(),r.Ub(5,"div",4),r.Ub(6,"div",5),r.Ub(7,"div"),r.Mc(8,u,2,0,"button",6),r.Tb(),r.Ub(9,"div"),r.Ub(10,"button",7),r.bc("click",function(){return s.cancel()}),r.Oc(11,"Cancel"),r.Tb(),r.Ub(12,"button",8),r.bc("click",function(){return r.Ec(e),r.Ac(4).save()}),r.Oc(13,"Verify Password"),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&e){const e=r.Ac(4);r.nc("ss-locale","create"===s.context.action?"create-doublelock-password":"enter-doublelock-password"),r.Cb(3),r.nc("showButtons",!1)("isModal",!0)("action",s.context.action),r.Cb(5),r.nc("ngIf",!s.isCreate),r.Cb(2),r.nc("disabled",e.isSaving),r.Cb(2),r.nc("disabled",!e.isValid||e.isSaving)("ss-locale",s.isCreate?"create-password":"verify-password")}},directives:[t.j,n.a,t.g,d.a,t.d,l.o],styles:[".forgot-link[_ngcontent-%COMP%]{padding-top:10px}.double-modal[_ngcontent-%COMP%]{min-height:100px}"]}),e})()},r35h:function(e,s,o){"use strict";o.d(s,"a",function(){return F});var t=o("3Pt+"),a=o("0IaG"),i=o("SxV6"),r=o("vHvj"),c=o("CiM1"),n=o("aRgc"),d=o("fXoL"),l=o("yyOT"),b=o("+znE"),u=o("NJqk"),h=o("ceUb"),p=o("ofXK"),m=o("Uz6v"),w=o("yiS+"),g=o("Q3F2"),f=o("taKe"),P=o("Ld1c");function k(e,s){if(1&e&&(d.Ub(0,"div"),d.Ub(1,"div",23),d.Oc(2,"No Secrets are associated to any DoubleLocks to which you have Access."),d.Tb(),d.Tb()),2&e){const e=d.fc();d.Cb(1),d.nc("ss-page-name",e.pageName)}}function y(e,s){if(1&e&&(d.Ub(0,"div"),d.Ub(1,"div",27),d.Oc(2),d.Tb(),d.Ub(3,"div",28),d.Pb(4,"ss-grid",29),d.Tb(),d.Tb()),2&e){const e=d.fc().$implicit,s=d.fc(2);d.Cb(2),d.Pc(e.doubleLockName),d.Cb(2),d.nc("columnDefinitions",s.columnDefinitions)("showSummary",!1)("items",e.secretsLost)("isResizable",!1)("useSortPipe",!0)("includePaging",!1)("noTableTopBorder",!0)("noTableBottomBorder",!0)("hideColumnSelector",!0)("pageName",s.pageName)}}function v(e,s){if(1&e&&(d.Sb(0),d.Mc(1,y,5,11,"div",3),d.Rb()),2&e){const e=s.$implicit;d.Cb(1),d.nc("ngIf",e&&e.secretsLost&&e.secretsLost.length>0)}}function C(e,s){if(1&e&&(d.Ub(0,"div",24),d.Ub(1,"div",25),d.Oc(2,"No one will have access to these Secrets. The data will be permanently lost and Secrets deleted."),d.Tb(),d.Mc(3,v,2,1,"ng-container",26),d.Tb()),2&e){const e=d.fc();d.Cb(1),d.nc("ss-page-name",e.pageName),d.Cb(2),d.nc("ngForOf",e.impact.doubleLocksImpacted)}}function T(e,s){if(1&e&&(d.Ub(0,"div"),d.Ub(1,"div",27),d.Oc(2),d.Tb(),d.Ub(3,"div",28),d.Pb(4,"ss-grid",31),d.Tb(),d.Tb()),2&e){const e=d.fc().$implicit,s=d.fc(2);d.Cb(2),d.Pc(e.doubleLockName),d.Cb(2),d.nc("columnDefinitions",s.columnDefinitions)("showSummary",!1)("items",e.secretsDisassociated)("isResizable",!1)("useSortPipe",!0)("includePaging",!1)("noTableTopBorder",!0)("noTableBottomBorder",!0)("hideColumnSelector",!0)("pageName",s.pageName)}}function S(e,s){if(1&e&&(d.Sb(0),d.Mc(1,T,5,11,"div",3),d.Rb()),2&e){const e=s.$implicit;d.Cb(1),d.nc("ngIf",e&&e.secretsDisassociated&&e.secretsDisassociated.length>0)}}function L(e,s){if(1&e&&(d.Ub(0,"div"),d.Ub(1,"div",30),d.Oc(2,"You will need to regain access to these Secrets"),d.Tb(),d.Mc(3,S,2,1,"ng-container",26),d.Tb()),2&e){const e=d.fc();d.Cb(1),d.nc("ss-page-name",e.pageName),d.Cb(2),d.nc("ngForOf",e.impact.doubleLocksImpacted)}}let F=(()=>{class e{constructor(e,s,o,a,i){this.context=e,this.dialog=s,this._doubleLockService=o,this._localizationService=a,this._ies=i,this.hasSecretsToLose=!1,this.hasSecretsToDisassociate=!1,this.pageName="secretactions",this.isLoading=!1,this.isValid=!1,this.isSaving=!1,this.formInputType=r.a,this.impact=null,this.columnDefinitions=null,this.resetPasswordForm=new t.k({currentUserPassword:new t.h("",c.a.requiredNotEmpty),newDoubleLockPassword:new t.h("",[c.a.requiredNotEmpty,c.a.mustMatchSiblingControlValue("confirmNewDoubleLockPassword")]),confirmNewDoubleLockPassword:new t.h("",[c.a.requiredNotEmpty,c.a.mustMatchSiblingControlValue("newDoubleLockPassword")])})}ngOnInit(){this._localizationService.getPageMessage("common","ok").pipe(Object(i.a)()).subscribe(e=>this._ok=e),this._localizationService.getPageMessage(this.pageName,"failed-to-change").pipe(Object(i.a)()).subscribe(e=>this._failedToSave=e),this._setColumns(),this._doubleLockService.getDoubleLockResetImpact().pipe(Object(i.a)()).subscribe(e=>{if(this.impact=e,this.impact.doubleLocksImpacted)for(let s=0;s<this.impact.doubleLocksImpacted.length;s++){const e=this.impact.doubleLocksImpacted[s];if(e.secretsLost&&e.secretsLost.length>0&&(this.hasSecretsToLose=!0),e.secretsDisassociated&&e.secretsDisassociated.length>0&&(this.hasSecretsToDisassociate=!0),this.hasSecretsToDisassociate&&this.hasSecretsToLose)break}})}checkEnter(e){"Enter"===e.key&&this.resetPasswordForm.valid&&this.changPassword()}changPassword(){this.isSaving=!0,this._doubleLockService.resetDoubleLockPassword(this.resetPasswordForm.value.currentUserPassword,this.resetPasswordForm.value.newDoubleLockPassword).pipe(Object(i.a)()).subscribe({next:e=>{this.isSaving=!1,this.dialog.close({isApproved:!0})},error:e=>{this.isSaving=!1,this._ies.assignErrorToFormGroup(this.resetPasswordForm,e)}})}cancel(){this.resetPasswordForm.setErrors(null),this.resetPasswordForm.markAsPristine(),this.resetPasswordForm.markAsUntouched(),this.resetPasswordForm.updateValueAndValidity(),this.dialog.close({isApproved:!1})}_setColumns(){this.columnDefinitions=[{propertyName:"secretName",displayName:"Secret Name",displayNameLocale:"secret-name",columnOrder:10},{propertyName:"template",displayName:"Template",displayNameLocale:"template",showColumn:!0,columnOrder:40},{propertyName:"folder",displayName:"Folder",displayNameLocale:"folder",columnOrder:50},{propertyName:"created",displayName:"Created",displayNameLocale:"created",columnType:n.a.DateTime,columnOrder:60}]}}return e.\u0275fac=function(s){return new(s||e)(d.Ob(a.a),d.Ob(a.i),d.Ob(l.a),d.Ob(b.a),d.Ob(u.B))},e.\u0275cmp=d.Ib({type:e,selectors:[["ss-modal-double-lock-password-reset"]],decls:36,vars:34,consts:[["mat-dialog-title","","ss-locale","reset-doublelock-password",1,"no-bottom-padding","narrow-padding",3,"ss-page-name"],["mat-dialog-content","",1,"no-side-margin"],["ss-locale","doublelock-reset-warning",1,"content-margin",3,"ss-page-name"],[4,"ngIf"],["class","secret-delete-warning",4,"ngIf"],[3,"formGroup"],[1,"ui","form"],["editSection","resetPasswordFormGroup",3,"ssForm"],[1,"change-password-form","dimmable"],[1,"ui","inverted","dimmer"],["ss-locale","verifying-password",1,"ui","medium","text","loader",3,"ss-page-name"],[3,"noBottomMargin"],[3,"showActions"],["label-column","",1,"header","required-field"],["ss-locale","login-password",3,"ss-page-name"],["formControlName","currentUserPassword","editSection","resetPasswordFormGroup",3,"type","inputWidthPercent","showModifyShowLink","alwaysHidePasswordGenerate","forceEditMode","keyup"],["ss-locale","new-doublelock-password",3,"ss-page-name"],["editSection","resetPasswordFormGroup","formControlName","newDoubleLockPassword",3,"type","alwaysHidePasswordGenerate","inputWidthPercent","showModifyShowLink","forceEditMode","keyup"],["ss-locale","confirm-doublelock-password",3,"ss-page-name"],["editSection","resetPasswordFormGroup","formControlName","confirmNewDoubleLockPassword",3,"type","inputWidthPercent","showModifyShowLink","alwaysHidePasswordGenerate","forceEditMode","keyup"],["mat-dialog-actions","",1,"narrow-padding"],["ss-locale","cancel","ss-page-name","common",1,"thy","basic","button",3,"disabled","click"],["ss-locale","reset-doublelock-password","ss-page-name","secretactions",1,"thy","primary","button","no-right-margin",3,"disabled","click"],["ss-locale","no-doublelock-secrets",1,"bold-heading",3,"ss-page-name"],[1,"secret-delete-warning"],["ss-locale","doublelock-lose-secrets",1,"bold-heading",3,"ss-page-name"],[4,"ngFor","ngForOf"],[1,"doublelock-name"],[1,"doublelock-grid"],["gridName","doublelock-reset-lost",3,"columnDefinitions","showSummary","items","isResizable","useSortPipe","includePaging","noTableTopBorder","noTableBottomBorder","hideColumnSelector","pageName"],["ss-locale","doublelock-regain-secrets",1,"bold-heading",3,"ss-page-name"],["gridName","doublelock-reset-disassociated",3,"columnDefinitions","showSummary","items","isResizable","useSortPipe","includePaging","noTableTopBorder","noTableBottomBorder","hideColumnSelector","pageName"]],template:function(e,s){1&e&&(d.Ub(0,"h1",0),d.Oc(1," Reset DoubleLock Password\n"),d.Tb(),d.Ub(2,"div",1),d.Ub(3,"div",2),d.Oc(4," Resetting your forgotten DoubleLock password is irreversible and could result in permanent loss of the data. In the case you are the only user with access to the DoubleLocked Secrets, the data will be lost and the Secrets deleted. If another user has access to the Secret, they will need to re-assign you to the DoubleLock. Please review the DoubleLocks and Secrets that will be impacted on reset. "),d.Tb(),d.Mc(5,k,3,1,"div",3),d.Mc(6,C,4,2,"div",4),d.Mc(7,L,4,2,"div",3),d.Ub(8,"div",5),d.Ub(9,"div",6),d.Pb(10,"ss-validation-summary",7),d.Ub(11,"div",8),d.Ub(12,"div",9),d.Ub(13,"div",10),d.Oc(14,"Verifying Password"),d.Tb(),d.Tb(),d.Ub(15,"ss-layout-form",11),d.Ub(16,"ss-layout-form-row",12),d.Ub(17,"label",13),d.Ub(18,"span",14),d.Oc(19,"Password"),d.Tb(),d.Tb(),d.Ub(20,"ss-form-input",15),d.bc("keyup",function(e){return s.checkEnter(e)}),d.Tb(),d.Tb(),d.Ub(21,"ss-layout-form-row",12),d.Ub(22,"label",13),d.Ub(23,"span",16),d.Oc(24,"New Password"),d.Tb(),d.Tb(),d.Ub(25,"ss-form-input",17),d.bc("keyup",function(e){return s.checkEnter(e)}),d.Tb(),d.Tb(),d.Ub(26,"ss-layout-form-row",12),d.Ub(27,"label",13),d.Ub(28,"span",18),d.Oc(29,"Confirm Password"),d.Tb(),d.Tb(),d.Ub(30,"ss-form-input",19),d.bc("keyup",function(e){return s.checkEnter(e)}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(31,"div",20),d.Ub(32,"button",21),d.bc("click",function(){return s.cancel()}),d.Oc(33,"Cancel"),d.Tb(),d.Ub(34,"button",22),d.bc("click",function(){return s.changPassword()}),d.Oc(35,"Reset DoubleLock Password"),d.Tb(),d.Tb()),2&e&&(d.nc("ss-page-name",s.pageName),d.Cb(3),d.nc("ss-page-name",s.pageName),d.Cb(2),d.nc("ngIf",s.impact&&!s.hasSecretsToDisassociate&&!s.hasSecretsToLose),d.Cb(1),d.nc("ngIf",s.hasSecretsToLose),d.Cb(1),d.nc("ngIf",s.hasSecretsToDisassociate),d.Cb(1),d.nc("formGroup",s.resetPasswordForm),d.Cb(2),d.nc("ssForm",s.resetPasswordForm),d.Cb(2),d.Gb("active",s.isSaving),d.Cb(1),d.nc("ss-page-name",s.pageName),d.Cb(2),d.nc("noBottomMargin",!0),d.Cb(1),d.nc("showActions",!1),d.Cb(2),d.nc("ss-page-name",s.pageName),d.Cb(2),d.nc("type",s.formInputType.Password)("inputWidthPercent",100)("showModifyShowLink",!1)("alwaysHidePasswordGenerate",!0)("forceEditMode",!0),d.Cb(1),d.nc("showActions",!1),d.Cb(2),d.nc("ss-page-name",s.pageName),d.Cb(2),d.nc("type",s.formInputType.Password)("alwaysHidePasswordGenerate",!0)("inputWidthPercent",100)("showModifyShowLink",!0)("forceEditMode",!0),d.Cb(1),d.nc("showActions",!1),d.Cb(2),d.nc("ss-page-name",s.pageName),d.Cb(2),d.nc("type",s.formInputType.Password)("inputWidthPercent",100)("showModifyShowLink",!0)("alwaysHidePasswordGenerate",!0)("forceEditMode",!0),d.Cb(2),d.nc("disabled",s.isSaving),d.Cb(2),d.nc("disabled",!s.resetPasswordForm.valid||s.isSaving))},directives:[a.j,h.a,a.g,p.o,t.t,t.l,m.a,w.a,g.a,f.a,t.s,t.j,a.d,p.n,P.a],styles:["label[_ngcontent-%COMP%]{font-weight:700;width:200px;max-width:200px;min-width:200px;margin:0 0 .28571429rem;color:var(--font-color-1)}.secret-delete-warning[_ngcontent-%COMP%]{background:var(--failure-background)}.doublelock-grid[_ngcontent-%COMP%]{padding:6px 11px 4px;background:var(--background-1);border:1px solid var(--border-color-1)}.bold-heading[_ngcontent-%COMP%]{font-size:1.35em;margin-top:8px;margin-bottom:0}.bold-heading[_ngcontent-%COMP%], .doublelock-name[_ngcontent-%COMP%]{font-weight:500;color:var(--font-color-1)}.doublelock-name[_ngcontent-%COMP%]{font-size:1em;margin-top:10px;margin-bottom:8px}"]}),e})()}}]);